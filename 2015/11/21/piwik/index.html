<!DOCTYPE HTML> <html> <head> <meta charset="utf-8"> <title>dzhai › Piwik</title> <meta name="author" content="dzhai"> <meta name="description" content="大翟"> <meta name="keywords" content="Piwik"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta property="og:title" content="Piwik"> <meta property="og:site_name" content="dzhai"> <meta property="og:image" content="undefined"> <link href="/favicon.png" rel="icon"> <link rel="alternate" href="/atom.xml" title="dzhai" type="application/atom+xml"> <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"> <script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?de86f16e85759414cb73dd76433ae1b7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script></head></html><body> <header id="header"><div class="meta inner"> <h1><a href="/">dzhai</a></h1> <h2 id="header-h2">宁静致远</h2> <nav id="main-nav"> <ul> <li><a href="/">首页</a></li> <li><a href="/archives">文章归档</a></li> <li><a href="/tags">标签</a></li> <li><a href="/links">友情链接</a></li> <li><a href="/about">关于</a></li> </ul> <div class="clearfix"></div> </nav> </div> <div class="clearfix"></div></header> <div id="content" class="inner"> <div id="main-col" class="alignleft"><div id="wrapper"><div id="toc" class="toc-article"> <strong class="toc-title">文章目录</strong> <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#piwik简介-piwik-doc"><span class="toc-number">1.</span> <span class="toc-text">Piwik简介 Piwik Doc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#piwik-安装"><span class="toc-number">2.</span> <span class="toc-text">Piwik 安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过js追踪-tracking-javascript-guide"><span class="toc-number">3.</span> <span class="toc-text">通过js追踪 tracking-javascript-guide</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#通用代码"><span class="toc-number">3.1.</span> <span class="toc-text">通用代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#改变文档标题"><span class="toc-number">3.2.</span> <span class="toc-text">改变文档标题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#事件点击"><span class="toc-number">3.3.</span> <span class="toc-text">事件点击</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#电子商务-ecommerce-analytics"><span class="toc-number">3.4.</span> <span class="toc-text">电子商务 ecommerce-analytics</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#产品类别访问"><span class="toc-number">3.4.1.</span> <span class="toc-text">产品/类别访问</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#订单"><span class="toc-number">3.4.2.</span> <span class="toc-text">订单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#购物车"><span class="toc-number">3.4.3.</span> <span class="toc-text">购物车</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#站内搜索"><span class="toc-number">3.5.</span> <span class="toc-text">站内搜索</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义变量-custom-variables"><span class="toc-number">3.6.</span> <span class="toc-text">自定义变量 custom-variables</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置userid"><span class="toc-number">3.7.</span> <span class="toc-text">设置UserID</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#设置cookie"><span class="toc-number">3.8.</span> <span class="toc-text">设置Cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#download-outlink-tracking"><span class="toc-number">3.9.</span> <span class="toc-text">Download & Outlink tracking</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过http-call-追踪"><span class="toc-number">4.</span> <span class="toc-text">通过Http call 追踪</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通过log追踪"><span class="toc-number">5.</span> <span class="toc-text">通过log追踪</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#report"><span class="toc-number">6.</span> <span class="toc-text">Report</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-number">7.</span> <span class="toc-text">其他</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#link"><span class="toc-number">8.</span> <span class="toc-text">Link</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#github"><span class="toc-number">9.</span> <span class="toc-text">GitHub</span></a></li></ol> </div> <article class="post"> <div class="post-content"> <header> <h1 class="title">Piwik</h1> <time datetime="2015-11-21T07:54:31.000Z">2015-11-21</time> </header> <div class="entry"> <h2 id="piwik&#x7B80;&#x4ECB;-piwik-doc"><a href="#Piwik&#x7B80;&#x4ECB;-Piwik-Doc" class="headerlink" title="Piwik&#x7B80;&#x4ECB; Piwik Doc"></a>Piwik&#x7B80;&#x4ECB; <a href="http://piwik.org/docs/" target="_blank" rel="external">Piwik Doc</a></h2><ol> <li>Piwik &#x662F;&#x4E00;&#x5957;&#x57FA;&#x4E8E; Php+MySQL &#x6280;&#x672F;&#x6784;&#x5EFA;&#xFF0C;&#x80FD;&#x591F;&#x4E0E; Google Analytics &#x76F8;&#x5AB2;&#x7F8E;&#x7684;&#x5F00;&#x6E90;&#x7F51;&#x7AD9;&#x8BBF;&#x95EE;&#x7EDF;&#x8BA1;&#x7CFB;&#x7EDF;&#x3002;Piwik &#x53EF;&#x4EE5;&#x7ED9;&#x4F60;&#x8BE6;&#x7EC6;&#x7684;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x7F51;&#x9875;&#x6D4F;&#x89C8;&#x4EBA;&#x6570;, &#x8BBF;&#x95EE;&#x6700;&#x591A;&#x7684;&#x9875;&#x9762;, &#x641C;&#x7D22;&#x5F15;&#x64CE;&#x5173;&#x952E;&#x8BCD;&#x7B49;&#x7B49;&#xFF0C;&#x5E76;&#x4E14;&#x91C7;&#x7528;&#x4E86;&#x5927;&#x91CF;&#x7684;AJAX/Flash&#x6280;&#x672F;&#xFF0C;&#x4F7F;&#x5F97;&#x5728;&#x64CD;&#x4F5C;&#x4E0A;&#x66F4;&#x52A0;&#x4FBF;&#x6613;&#x3002;</li> <li>Piwik &#x53EF;&#x4EE5;&#x5B89;&#x88C5;&#x5728;&#x4F60;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x9762;&#xFF0C;&#x6570;&#x636E;&#x5C31;&#x4FDD;&#x5B58;&#x5728;&#x4F60;&#x81EA;&#x5DF1;&#x7684;&#x670D;&#x52A1;&#x5668;&#x4E0A; &#x9762;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#x7684;&#x63D2;&#x5165;&#x7EDF;&#x8BA1;&#x56FE;&#x8868;&#x5230;&#x4F60;&#x7684;&#x535A;&#x5BA2;&#x6216;&#x662F;&#x7F51;&#x7AD9;&#x540E;&#x53F0;&#x7684;&#x63A7;&#x5236;&#x9762;&#x677F;&#x4E2D;&#x3002;&#x5B89;&#x88C5;&#x5B8C;&#x6210;&#x540E;&#xFF0C;&#x4F60;&#x53EA;&#x9700;&#x5C06;&#x4E00;&#x5C0F;&#x6BB5;&#x4EE3;&#x7801;&#x653E;&#x5230;&#x5C06;&#x8981;&#x7EDF;&#x8BA1;&#x7684;&#x7F51;&#x9875;&#x4E2D;&#x5373;&#x53EF;&#x3002;</li> <li>&#x6B64;&#x5916;&#xFF0C;&#x5B83;&#x8FD8;&#x91C7;&#x7528;&#x4E86;&#x63D2;&#x4EF6;&#x6269;&#x5C55;&#x53CA;&#x5F00;&#x653E;API&#x67B6;&#x6784;&#xFF0C;&#x62E5;&#x6709;&#x4F17;&#x591A;&#x4E0D;&#x540C;&#x529F;&#x80FD;&#x7684;&#x63D2;&#x4EF6;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x8BA9;&#x5F00;&#x53D1;&#x4EBA;&#x5458;&#x6839;&#x636E;&#x81EA;&#x5DF2;&#x7684;&#x5B9E;&#x9645;&#x9700;&#x6C42;&#x521B;&#x5EFA;&#x66F4;&#x591A;&#x7684;&#x529F;&#x80FD;&#x3002;</li> </ol> <a id="more"></a> <h2 id="piwik-&#x5B89;&#x88C5;"><a href="#Piwik-&#x5B89;&#x88C5;" class="headerlink" title="Piwik &#x5B89;&#x88C5;"></a>Piwik &#x5B89;&#x88C5;</h2><ol> <li>PHP + Apache &#x914D;&#x7F6E;&#x5B89;&#x88C5; <a href="http://www.cnblogs.com/homezzm/archive/2012/08/01/2618062.html" target="_blank" rel="external">Window&#x4E0B;&#x914D;&#x7F6E;PHP&#x73AF;&#x5883;</a></li> <li>&#x76F4;&#x63A5;&#x4E0B;&#x8F7D;PHP&#x96C6;&#x6210;&#x5B89;&#x88C5;&#x73AF;&#x5883; <a href="http://www.oschina.net/p/wampserver" target="_blank" rel="external">wampserver</a></li> </ol> <p><code>&#x5982;&#x679C;&#x662F;&#x7535;&#x5B50;&#x5546;&#x52A1;&#x7F51;&#x7AD9;&#x53EF;&#x4EE5;&#x5F00;&#x542F;&#x7535;&#x5B50;&#x5546;&#x52A1;&#x7F51;&#x7AD9;&#x5206;&#x6790;&#x914D;&#x7F6E;</code></p> <h2 id="&#x901A;&#x8FC7;js&#x8FFD;&#x8E2A;-tracking-javascript-guide"><a href="#&#x901A;&#x8FC7;js&#x8FFD;&#x8E2A;-tracking-javascript-guide" class="headerlink" title="&#x901A;&#x8FC7;js&#x8FFD;&#x8E2A; tracking-javascript-guide"></a>&#x901A;&#x8FC7;js&#x8FFD;&#x8E2A; <a href="http://developer.piwik.org/guides/tracking-javascript-guide" target="_blank" rel="external">tracking-javascript-guide</a></h2><h3 id="&#x901A;&#x7528;&#x4EE3;&#x7801;"><a href="#&#x901A;&#x7528;&#x4EE3;&#x7801;" class="headerlink" title="&#x901A;&#x7528;&#x4EE3;&#x7801;"></a>&#x901A;&#x7528;&#x4EE3;&#x7801;</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Piwik --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span><br><span class="line">  <span class="keyword">var</span> _paq = _paq || [];</span><br><span class="line">  _paq.push([<span class="string">&apos;trackPageView&apos;</span>]);</span><br><span class="line">  _paq.push([<span class="string">&apos;enableLinkTracking&apos;</span>]);</span><br><span class="line">  (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>{</span><br><span class="line">    <span class="keyword">var</span> u=<span class="string">&quot;//piwik.maxtp.cn/&quot;</span>;</span><br><span class="line">    _paq.push([<span class="string">&apos;setTrackerUrl&apos;</span>, u+<span class="string">&apos;piwik.php&apos;</span>]);</span><br><span class="line">    _paq.push([<span class="string">&apos;setSiteId&apos;</span>, <span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">var</span> d=<span class="built_in">document</span>, g=d.createElement(<span class="string">&apos;script&apos;</span>), s=d.getElementsByTagName(<span class="string">&apos;script&apos;</span>)[<span class="number">0</span>];</span><br><span class="line">    g.type=<span class="string">&apos;text/javascript&apos;</span>; g.async=<span class="literal">true</span>; g.defer=<span class="literal">true</span>; g.src=u+<span class="string">&apos;piwik.js&apos;</span>; s.parentNode.insertBefore(g,s);</span><br><span class="line">  })();</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">noscript</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;//piwik.maxtp.cn/piwik.php?idsite=1&quot;</span> <span class="attr">style</span>=<span class="string">&quot;border:0;&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- End Piwik Code --&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="&#x6539;&#x53D8;&#x6587;&#x6863;&#x6807;&#x9898;"><a href="#&#x6539;&#x53D8;&#x6587;&#x6863;&#x6807;&#x9898;" class="headerlink" title="&#x6539;&#x53D8;&#x6587;&#x6863;&#x6807;&#x9898;"></a>&#x6539;&#x53D8;&#x6587;&#x6863;&#x6807;&#x9898;</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setDocumentTitle&apos;</span>, document.domain + <span class="string">&quot;/&quot;</span> + document.title]);</span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;trackPageView&apos;</span>]);</span><br></pre></td></tr></table></figure> <h3 id="&#x4E8B;&#x4EF6;&#x70B9;&#x51FB;"><a href="#&#x4E8B;&#x4EF6;&#x70B9;&#x51FB;" class="headerlink" title="&#x4E8B;&#x4EF6;&#x70B9;&#x51FB;"></a>&#x4E8B;&#x4EF6;&#x70B9;&#x51FB;</h3><p><code>trackEvent(category, action, [name], [value])</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_paq.push([<span class="string">&apos;trackEvent&apos;</span>, <span class="string">&apos;Documentary&apos;</span>, <span class="string">&apos;Rating&apos;</span>, <span class="string">&apos;Thrive&apos;</span>, <span class="number">9.5</span>]);</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;javascript:_paq.push([&apos;trackEvent&apos;, &apos;Menu&apos;, &apos;Freedom&apos;]);&quot;</span>&gt;</span>Freedom page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p> <h3 id="&#x7535;&#x5B50;&#x5546;&#x52A1;-ecommerce-analytics"><a href="#&#x7535;&#x5B50;&#x5546;&#x52A1;-ecommerce-analytics" class="headerlink" title="&#x7535;&#x5B50;&#x5546;&#x52A1; ecommerce-analytics"></a>&#x7535;&#x5B50;&#x5546;&#x52A1; <a href="http://piwik.org/docs/ecommerce-analytics/" target="_blank" rel="external">ecommerce-analytics</a></h3><h4 id="&#x4EA7;&#x54C1;&#x7C7B;&#x522B;&#x8BBF;&#x95EE;"><a href="#&#x4EA7;&#x54C1;-&#x7C7B;&#x522B;&#x8BBF;&#x95EE;" class="headerlink" title="&#x4EA7;&#x54C1;/&#x7C7B;&#x522B;&#x8BBF;&#x95EE;"></a>&#x4EA7;&#x54C1;/&#x7C7B;&#x522B;&#x8BBF;&#x95EE;</h4><p><code>setEcommerceView( productSKU, productName, categoryName, price )</code><br>&#x4EA7;&#x54C1;<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[...]</span></span><br><span class="line"><span class="comment">// all parameters are optional, but we recommend to set at minimum productSKU and productName</span></span><br><span class="line"><span class="selector-tag">_paq</span><span class="selector-class">.push</span>([<span class="string">&apos;setEcommerceView&apos;</span>,</span><br><span class="line"><span class="string">&quot;9780786706211&quot;</span>, <span class="comment">// (required) SKU: Product unique identifier</span></span><br><span class="line"><span class="string">&quot;Endurance: Shackleton&apos;s Incredible Voyage&quot;</span>, <span class="comment">// (optional) Product name</span></span><br><span class="line"><span class="string">&quot;Adventure Books&quot;</span>, <span class="comment">// (optional) Product category, or array of up to 5 categories</span></span><br><span class="line"><span class="number">20.11</span> <span class="comment">// (optional) Product Price as displayed on the page</span></span><br><span class="line">]);</span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;trackPageView&apos;</span>]);</span><br><span class="line"><span class="selector-attr">[...]</span></span><br></pre></td></tr></table></figure></p> <p>&#x7C7B;&#x522B;<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[...]</span><br><span class="line">// on a category page, productSKU and productName are not applicable and are <span class="keyword">set</span> <span class="keyword">to</span> <span class="literal">false</span></span><br><span class="line">_paq.push([<span class="string">&apos;setEcommerceView&apos;</span>,</span><br><span class="line">productSku = <span class="literal">false</span>, // <span class="keyword">No</span> product <span class="keyword">on</span> <span class="keyword">Category</span> page</span><br><span class="line">productName = <span class="literal">false</span>, // <span class="keyword">No</span> product <span class="keyword">on</span> <span class="keyword">Category</span> page</span><br><span class="line"><span class="keyword">category</span> = <span class="string">&quot;Adventure Books&quot;</span> // <span class="keyword">Category</span> Page, <span class="keyword">or</span> <span class="built_in">array</span> <span class="keyword">of</span> up <span class="keyword">to</span> <span class="number">5</span> categories</span><br><span class="line">]);</span><br><span class="line">_paq.push([&apos;trackPageView&apos;]);</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure></p> <h4 id="&#x8BA2;&#x5355;"><a href="#&#x8BA2;&#x5355;" class="headerlink" title="&#x8BA2;&#x5355;"></a>&#x8BA2;&#x5355;</h4><p><code>addEcommerceItem(productSKU, productName, productCategory, price, quantity)</code><br>&#x5982;&#x679C;&#x8BA2;&#x5355;&#x6709;&#x591A;&#x4E2A;&#x4EA7;&#x54C1;&#x9700;&#x8981;&#x5FAA;&#x73AF;&#x8C03;&#x7528;<br><code>trackEcommerceOrder(orderId, grandTotal, subTotal, tax, shipping, discount)</code><br><figure class="highlight scheme"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[<span class="name"><span class="builtin-name">...</span></span>]</span><br><span class="line">// add the first product to the order</span><br><span class="line">_paq.push([<span class="symbol">&apos;addEcommerceItem</span>&apos;,</span><br><span class="line"><span class="string">&quot;9780786706211&quot;</span>, // (<span class="name">required</span>) SKU: Product unique identifier</span><br><span class="line"><span class="string">&quot;Endurance: Shackleton&apos;s Incredible Voyage&quot;</span>, // (<span class="name">optional</span>) Product name</span><br><span class="line"><span class="string">&quot;Adventure Books&quot;</span>, // (<span class="name">optional</span>) Product category. You can also specify an array of up to <span class="number">5</span> categories eg. [<span class="string">&quot;Books&quot;</span>, <span class="string">&quot;New releases&quot;</span>, <span class="string">&quot;Biography&quot;</span>]</span><br><span class="line"><span class="number">8.8</span>, // (<span class="name">recommended</span>) Product price</span><br><span class="line"><span class="number">1</span> // (<span class="name">optional</span>, default to <span class="number">1</span>) Product quantity</span><br><span class="line">])<span class="comment">;</span></span><br><span class="line">// Here you can add other products in the order</span><br><span class="line">[<span class="name"><span class="builtin-name">...</span></span>]</span><br><span class="line">// Specifiy the order details to Piwik server &amp;amp<span class="comment">; sends the data to Piwik server</span></span><br><span class="line">_paq.push([<span class="symbol">&apos;trackEcommerceOrder</span>&apos;,</span><br><span class="line"><span class="string">&quot;A10000123&quot;</span>, // (<span class="name">required</span>) Unique Order ID</span><br><span class="line"><span class="number">35</span>, // (<span class="name">required</span>) Order Revenue grand total (<span class="name">includes</span> tax, shipping, and subtracted discount)</span><br><span class="line"><span class="number">30</span>, // (<span class="name">optional</span>) Order sub total (<span class="name">excludes</span> shipping)</span><br><span class="line"><span class="number">5.5</span>, // (<span class="name">optional</span>) Tax amount</span><br><span class="line"><span class="number">4.5</span>, // (<span class="name">optional</span>) Shipping amount</span><br><span class="line">false // (<span class="name">optional</span>) Discount offered (<span class="name">set</span> to false for unspecified parameter)</span><br><span class="line">])<span class="comment">;</span></span><br><span class="line">// we recommend to leave the call to trackPageView() on the Order confirmation page</span><br><span class="line">_paq.push([<span class="symbol">&apos;trackPageView</span>&apos;])<span class="comment">;</span></span><br><span class="line">[<span class="name"><span class="builtin-name">...</span></span>]</span><br></pre></td></tr></table></figure></p> <h4 id="&#x8D2D;&#x7269;&#x8F66;"><a href="#&#x8D2D;&#x7269;&#x8F66;" class="headerlink" title="&#x8D2D;&#x7269;&#x8F66;"></a>&#x8D2D;&#x7269;&#x8F66;</h4><pre><code>TODO
</code></pre><h3 id="&#x7AD9;&#x5185;&#x641C;&#x7D22;"><a href="#&#x7AD9;&#x5185;&#x641C;&#x7D22;" class="headerlink" title="&#x7AD9;&#x5185;&#x641C;&#x7D22;"></a>&#x7AD9;&#x5185;&#x641C;&#x7D22;</h3><pre><code>TODO
</code></pre><h3 id="&#x81EA;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;-custom-variables"><a href="#&#x81EA;&#x5B9A;&#x4E49;&#x53D8;&#x91CF;-custom-variables" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;&#x53D8;&#x91CF; custom-variables"></a>&#x81EA;&#x5B9A;&#x4E49;&#x53D8;&#x91CF; <a href="http://piwik.org/docs/custom-variables/" target="_blank" rel="external">custom-variables</a></h3><p><strong><code>setCustomVariable(index, name, value, scope = &quot;visit&quot;)</code></strong><br><figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">_paq.push([<span class="symbol">&apos;setCustomVariable</span>&apos;,</span><br><span class="line">    // Index, the number from <span class="number">1</span> <span class="keyword">to</span> <span class="number">5</span> where this custom <span class="keyword">variable</span> name <span class="keyword">is</span> stored</span><br><span class="line">    <span class="number">1</span>,</span><br><span class="line">    // Name, the name <span class="keyword">of</span> the <span class="keyword">variable</span>, <span class="keyword">for</span> example: Gender, VisitorType</span><br><span class="line">    <span class="string">&quot;Gender&quot;</span>,</span><br><span class="line">    // Value, <span class="keyword">for</span> example: <span class="string">&quot;Male&quot;</span>, <span class="string">&quot;Female&quot;</span> <span class="keyword">or</span> <span class="string">&quot;new&quot;</span>, <span class="string">&quot;engaged&quot;</span>, <span class="string">&quot;customer&quot;</span></span><br><span class="line">    <span class="string">&quot;Male&quot;</span>,</span><br><span class="line">    // Scope <span class="keyword">of</span> the custom <span class="keyword">variable</span>, <span class="string">&quot;visit&quot;</span> means the custom <span class="keyword">variable</span> applies <span class="keyword">to</span> the current visit</span><br><span class="line">    <span class="string">&quot;visit&quot;</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line">_paq.push([<span class="symbol">&apos;trackPageView</span>&apos;]);</span><br></pre></td></tr></table></figure></p> <p><strong><code>setCustomVariable(index, name, value, scope = &quot;page&quot;)</code></strong><br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Track 2 custom variables with the same name, but in different slots.</span></span><br><span class="line"><span class="comment">// You will then access the statistics about your articles&apos; categories in the &apos;Visitors &amp;gt; custom variables&apos; report</span></span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setCustomVariable&apos;</span>, <span class="number">1</span>, <span class="string">&apos;Category&apos;</span>, <span class="string">&apos;Sports&apos;</span>, <span class="string">&apos;page&apos;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Track the same name but in a different Index</span></span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setCustomVariable&apos;</span>, <span class="number">2</span>, <span class="string">&apos;Category&apos;</span>, <span class="string">&apos;Europe&apos;</span>, <span class="string">&apos;page&apos;</span>]);</span><br><span class="line"><span class="comment">// Here you could track other custom variables with scope &quot;page&quot; in Index 3, 4 or 5</span></span><br><span class="line"><span class="comment">// The order is important: first setCustomVariable is called and then trackPageView records the request</span></span><br><span class="line"></span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;trackPageView&apos;</span>]);</span><br></pre></td></tr></table></figure></p> <h3 id="&#x8BBE;&#x7F6E;userid"><a href="#&#x8BBE;&#x7F6E;UserID" class="headerlink" title="&#x8BBE;&#x7F6E;UserID"></a>&#x8BBE;&#x7F6E;UserID</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setUserId&apos;</span>, <span class="string">&apos;USER_ID_HERE&apos;</span>]);</span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;trackPageView&apos;</span>]);</span><br></pre></td></tr></table></figure> <h3 id="&#x8BBE;&#x7F6E;cookie"><a href="#&#x8BBE;&#x7F6E;Cookie" class="headerlink" title="&#x8BBE;&#x7F6E;Cookie"></a>&#x8BBE;&#x7F6E;Cookie</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setSiteId&apos;</span>, <span class="number">1</span>]);</span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setTrackerUrl&apos;</span>, u+<span class="string">&apos;piwik.php&apos;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Same cookie as: example.com, www.example.com, subdomain.example.com, ...</span></span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setCookieDomain&apos;</span>, <span class="string">&apos;*.example.com&apos;</span>]);</span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;setDomains&apos;</span>, <span class="string">&apos;*.example.com&apos;</span>]); <span class="comment">// Download &amp; Click tracking alias domains</span></span><br><span class="line"></span><br><span class="line">_paq<span class="selector-class">.push</span>([<span class="string">&apos;trackPageView&apos;</span>]);</span><br></pre></td></tr></table></figure> <p>&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x7EDF;&#x8BA1; &#x67D0;&#x4E2A;&#x54C1;&#x724C;&#x4E0B;&#x4EA7;&#x54C1;&#x7684;&#x6D4F;&#x89C8;&#x6570;</p> <h3 id="download-outlink-tracking"><a href="#Download-amp-Outlink-tracking" class="headerlink" title="Download &amp; Outlink tracking"></a>Download &amp; Outlink tracking</h3><p><code>TODO</code></p> <h2 id="&#x901A;&#x8FC7;http-call-&#x8FFD;&#x8E2A;"><a href="#&#x901A;&#x8FC7;Http-call-&#x8FFD;&#x8E2A;" class="headerlink" title="&#x901A;&#x8FC7;Http call &#x8FFD;&#x8E2A;"></a>&#x901A;&#x8FC7;Http call &#x8FFD;&#x8E2A;</h2><p><a href="http://developer.piwik.org/guides/tracking-api-clients" target="_blank" rel="external">http://developer.piwik.org/guides/tracking-api-clients</a></p> <p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x5176;&#x4ED6;&#x8BED;&#x8A00;&#x8C03;&#x7528;api&#x6DFB;&#x52A0;&#x5BF9;&#x5E94;&#x7684;&#x7EDF;&#x8BA1;&#x4FE1;&#x606F;<br>java <a href="https://github.com/piwik/piwik-java-tracker" target="_blank" rel="external">https://github.com/piwik/piwik-java-tracker</a></p> <h2 id="&#x901A;&#x8FC7;log&#x8FFD;&#x8E2A;"><a href="#&#x901A;&#x8FC7;log&#x8FFD;&#x8E2A;" class="headerlink" title="&#x901A;&#x8FC7;log&#x8FFD;&#x8E2A;"></a>&#x901A;&#x8FC7;log&#x8FFD;&#x8E2A;</h2><p><a href="http://piwik.org/log-analytics/" target="_blank" rel="external">http://piwik.org/log-analytics/</a></p> <h2 id="report"><a href="#Report" class="headerlink" title="Report"></a>Report</h2><ol> <li>&#x5BFC;&#x51FA;&#x5BF9;&#x5E94;&#x7684;&#x56FE;&#x7247;</li> <li>&#x901A;&#x8FC7;&#x540E;&#x53F0;&#x5BFC;&#x51FA;&#x5BF9;&#x5E94;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E; &#x83B7;&#x5F97;APIURL<br><a href="http://developer.piwik.org/guides/querying-the-reporting-api" target="_blank" rel="external">http://developer.piwik.org/guides/querying-the-reporting-api</a></li> <li>&#x76F4;&#x63A5;&#x751F;&#x6210;&#x5BF9;&#x5E94;&#x7684;html&#x4EE3;&#x7801; iframe</li> </ol> <h2 id="&#x5176;&#x4ED6;"><a href="#&#x5176;&#x4ED6;" class="headerlink" title="&#x5176;&#x4ED6;"></a>&#x5176;&#x4ED6;</h2><ol> <li>&#x4E2D;&#x56FD;&#x5730;&#x56FE;&#x4FE1;&#x606F;&#x53CA;&#x57CE;&#x5E02;&#x5750;&#x6807;&#x95EE;&#x9898;</li> <li>&#x6027;&#x80FD;&#x4F18;&#x5316;</li> <li>&#x4E2A;&#x6027;&#x63D2;&#x4EF6;</li> <li>&#x6570;&#x636E;&#x91CF;&#x7684;&#x65F6;&#x5019;&#x9700;&#x8981;&#x5173;&#x95ED;&#x5B9E;&#x65F6;&#x7EDF;&#x8BA1;&#x9700;&#x8981;&#x6839;&#x636E;&#x5B9A;&#x65F6;&#x5668;&#x7EDF;&#x8BA1;</li> <li>&#x5B98;&#x65B9;&#x540D;&#x8BCD;&#x89E3;&#x91CA;<br><a href="http://glossary.piwik.org/?language=zh-cn" target="_blank" rel="external">http://glossary.piwik.org/?language=zh-cn</a></li> </ol> <h2 id="link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><p><a href="http://piwik.org/" target="_blank" rel="external">http://piwik.org/</a><br><a href="http://developer.piwik.org/" target="_blank" rel="external">http://developer.piwik.org/</a><br><a href="http://piwik.org/docs/" target="_blank" rel="external">http://piwik.org/docs/</a><br><a href="http://demo.piwik.org/" target="_blank" rel="external">http://demo.piwik.org/</a><br><a href="http://www.piwik.cn/" target="_blank" rel="external">http://www.piwik.cn/</a><br><a href="http://wenku.baidu.com/link?url=bE-zyTZZPsDKvMGCyi4pj7fUDuoROFdEkO50y4XQ7RVjVMAzWAC9IolfoU3g9fumHPv4gOMF5yG8E6C-oqHyWR4mHrsgCn0K7831iWarwSG" target="_blank" rel="external">&#x767E;&#x5EA6;&#x6587;&#x5E93;</a><br><a href="http://www.docin.com/p-495978882.html" target="_blank" rel="external">&#x4F18;&#x5316;&#x8BBE;&#x7F6E;</a></p> <h2 id="github"><a href="#GitHub" class="headerlink" title="GitHub"></a>GitHub</h2><p><a href="https://github.com/dzhai/piwik_demo" target="_blank" rel="external">piwik_demo</a></p> </div> <script type="text/javascript">function rewardButtonClick(){var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"}</script><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"> <div></div> <button id="rewardButton" disable="enable" onclick="rewardButtonClick()" style="cursor:pointer;border:0;outline:0;border-radius:100%;padding:0;margin:0;letter-spacing:normal;text-transform:none;text-indent:0;text-shadow:none"> <span onmouseover="this.style.color=&quot;rgb(236,96,0)&quot;,this.style.background=&quot;rgb(204,204,204)&quot" onmouseout="this.style.color=&quot;#fff&quot;,this.style.background=&quot;rgb(236,96,0)&quot" style="display:inline-block;width:70px;height:70px;border-radius:100%;line-height:81px;color:#fff;font:400 35px/75px microsofty;background:#ec6000">赏</span> </button> <div id="QR" style="display:none"> <div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/resource/images/reward/wechat.png" alt="翟春龙 WeChat Pay" style="width:200px;max-width:100%;display:inline-block"> <p>微信打赏</p> </div> <div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/resource/images/reward/alipay.png" alt="翟春龙 Alipay" style="width:200px;max-width:100%;display:inline-block"> <p>支付宝打赏</p> </div> </div> <div></div></div> <footer> <div class="alignleft"> <div class="categories"> <a href="/categories/系统日志分析/">系统日志分析</a> </div> <div class="tags"> <a href="/tags/Piwik/">Piwik</a>, <a href="/tags/系统日志分析/">系统日志分析</a> </div> </div> <div class="alignright"> <div style="z-index:1000000"> <div class="ds-share flat" data-thread-key="2015/11/21/piwik/" data-title="Piwik" data-content="" data-url="http://www.dzhai.net/2015/11/21/piwik/"> <div class="ds-share-inline"> <ul class="ds-share-icons-16"> <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li> <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li> <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li> <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li> <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li> </ul> <div class="ds-share-icons-more"> </div> </div> </div> </div> </div> <div class="clearfix"></div> </footer> </div> </article> <section id="comment"> <!-- Duoshuo Comment BEGIN --> <div class="ds-thread" data-thread-key="2015/11/21/piwik/"></div> <script type="text/javascript">var duoshuoQuery={short_name:"dzhai"};!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://static.duoshuo.com/embed.js",e.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><!-- Duoshuo Comment END --></section></div></div><div class="clearfix"></div> </div> <footer id="footer"><div class="inner"><div class="alignleft"> <p> &copy; 2016 dzhai </p> <p> <a href="https://github.com/imbyron/hexo-theme-daisy">Theme</a> By <a href="http://googleyixia.com">Byron</a> based on <a href="https://github.com/willerce/hexo-theme-noderce">Noderce</a>. </p> </div> <div class="clearfix"></div></div></footer> <script type="text/javascript"></script></body>