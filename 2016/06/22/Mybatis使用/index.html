<!DOCTYPE HTML> <html> <head> <meta charset="utf-8"> <title>dzhai › Mybatis使用</title> <meta name="author" content="dzhai"> <meta name="description" content="大翟"> <meta name="keywords" content="Mybatis"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta property="og:title" content="Mybatis使用"> <meta property="og:site_name" content="dzhai"> <meta property="og:image" content="undefined"> <link href="/favicon.png" rel="icon"> <link rel="alternate" href="/atom.xml" title="dzhai" type="application/atom+xml"> <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"> <script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?de86f16e85759414cb73dd76433ae1b7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script></head></html><body> <header id="header"><div class="meta inner"> <h1><a href="/">dzhai</a></h1> <h2 id="header-h2">宁静致远</h2> <nav id="main-nav"> <ul> <li><a href="/">首页</a></li> <li><a href="/archives">文章归档</a></li> <li><a href="/tags">标签</a></li> <li><a href="/links">友情链接</a></li> <li><a href="/about">关于</a></li> </ul> <div class="clearfix"></div> </nav> </div> <div class="clearfix"></div></header> <div id="content" class="inner"> <div id="main-col" class="alignleft"><div id="wrapper"><div id="toc" class="toc-article"> <strong class="toc-title">文章目录</strong> <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis执行过程"><span class="toc-number">1.</span> <span class="toc-text">Mybatis执行过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工厂目录结构及配置"><span class="toc-number">2.</span> <span class="toc-text">工厂目录结构及配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybati配置"><span class="toc-number">3.</span> <span class="toc-text">Mybati配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pom引入"><span class="toc-number">3.1.</span> <span class="toc-text">pom引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis-configxml配置"><span class="toc-number">3.2.</span> <span class="toc-text">mybatis-config.xml配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis-generator使用"><span class="toc-number">4.</span> <span class="toc-text">Mybatis Generator使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#pom引入"><span class="toc-number">4.1.</span> <span class="toc-text">pom引入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置generatorconfigxml"><span class="toc-number">4.2.</span> <span class="toc-text">配置generatorConfig.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加java执行方法"><span class="toc-number">4.3.</span> <span class="toc-text">添加java执行方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis基本使用"><span class="toc-number">5.</span> <span class="toc-text">Mybatis基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单元测试"><span class="toc-number">5.1.</span> <span class="toc-text">单元测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关联查询"><span class="toc-number">5.2.</span> <span class="toc-text">关联查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#one2one"><span class="toc-number">5.2.1.</span> <span class="toc-text">one2one</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#one2many"><span class="toc-number">5.2.2.</span> <span class="toc-text">one2many</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#many2many"><span class="toc-number">5.2.3.</span> <span class="toc-text">many2many</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis缓存"><span class="toc-number">6.</span> <span class="toc-text">Mybatis缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一级缓存"><span class="toc-number">6.1.</span> <span class="toc-text">一级缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#二级缓存"><span class="toc-number">6.2.</span> <span class="toc-text">二级缓存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mybatis-spring"><span class="toc-number">7.</span> <span class="toc-text">Mybatis-spring</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mybatis-configxml"><span class="toc-number">7.1.</span> <span class="toc-text">mybatis-config.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库链接配置"><span class="toc-number">7.2.</span> <span class="toc-text">数据库链接配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数据库事务配置"><span class="toc-number">7.3.</span> <span class="toc-text">数据库事务配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-number">8.</span> <span class="toc-text">其他</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#link"><span class="toc-number">9.</span> <span class="toc-text">Link</span></a></li></ol> </div> <article class="post"> <div class="post-content"> <header> <h1 class="title">Mybatis使用</h1> <time datetime="2016-06-22T07:30:38.000Z">2016-06-22</time> </header> <div class="entry"> <h2 id="mybatis&#x6267;&#x884C;&#x8FC7;&#x7A0B;"><a href="#Mybatis&#x6267;&#x884C;&#x8FC7;&#x7A0B;" class="headerlink" title="Mybatis&#x6267;&#x884C;&#x8FC7;&#x7A0B;"></a>Mybatis&#x6267;&#x884C;&#x8FC7;&#x7A0B;</h2><p><img src="/resource/images/20160622/mybatis.png" width="76%" alt="&#x6267;&#x884C;&#x8FC7;&#x7A0B;"></p> <a id="more"></a> <h2 id="&#x5DE5;&#x5382;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x53CA;&#x914D;&#x7F6E;"><a href="#&#x5DE5;&#x5382;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x53CA;&#x914D;&#x7F6E;" class="headerlink" title="&#x5DE5;&#x5382;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x53CA;&#x914D;&#x7F6E;"></a>&#x5DE5;&#x5382;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#x53CA;&#x914D;&#x7F6E;</h2><p><img src="/resource/images/20160622/project.png" alt="&#x9879;&#x76EE;&#x76EE;&#x5F55;"><br>&#x90FD;&#x662F;&#x5B98;&#x65B9;&#x63A8;&#x8350;&#x7684;&#x76EE;&#x5F55;&#x7ED3;&#x6784;&#xFF0C;&#x6CA1;&#x4EC0;&#x4E48;&#x53EF;&#x8BF4;&#x7684;</p> <p>&#x6709;4&#x4E2A;&#x8868;<br>user &#x7528;&#x6237;<br>orders &#x8BA2;&#x5355;<br>orderdetail &#x8BA2;&#x5355;&#x8BE6;&#x60C5;<br>items &#x5546;&#x54C1;</p> <h2 id="mybati&#x914D;&#x7F6E;"><a href="#Mybati&#x914D;&#x7F6E;" class="headerlink" title="Mybati&#x914D;&#x7F6E;"></a>Mybati&#x914D;&#x7F6E;</h2><h3 id="pom&#x5F15;&#x5165;"><a href="#pom&#x5F15;&#x5165;" class="headerlink" title="pom&#x5F15;&#x5165;"></a>pom&#x5F15;&#x5165;</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.20.0-GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.21<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>		</span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="mybatis-configxml&#x914D;&#x7F6E;"><a href="#mybatis-config-xml&#x914D;&#x7F6E;" class="headerlink" title="mybatis-config.xml&#x914D;&#x7F6E;"></a>mybatis-config.xml&#x914D;&#x7F6E;</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span><br><span class="line">PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x5168;&#x5C40;&#x6620;&#x5C04;&#x5668;&#x542F;&#x7528;&#x7F13;&#x5B58; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x5173;&#x95ED;&#x5173;&#x8054;&#x5BF9;&#x8C61;&#x5373;&#x65F6;&#x52A0;&#x8F7D;&#x4EE5;&#x63D0;&#x9AD8;&#x6027;&#x80FD; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--  &#x5F00;&#x542F;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="comment">&lt;!-- 	&lt;typeAliases&gt;&lt;/typeAliases&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 	&lt;plugins&gt;&lt;/plugins&gt; --&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- &#x4F7F;&#x7528;jdbc&#x4E8B;&#x52A1;&#x7BA1;&#x7406;&#xFF0C;&#x76EE;&#x524D;&#x7531;mybatis&#x6765;&#x7BA1;&#x7406; --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span> /&gt;</span></span><br><span class="line">			<span class="comment">&lt;!-- &#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;&#xFF0C;&#x76EE;&#x524D;&#x7531;mybatis&#x6765;&#x7BA1;&#x7406; --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/github/dzhai/mapper/UserMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;com/github/dzhai/mapper/OrdersQueryMapper.xml&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure> <h2 id="mybatis-generator&#x4F7F;&#x7528;"><a href="#Mybatis-Generator&#x4F7F;&#x7528;" class="headerlink" title="Mybatis Generator&#x4F7F;&#x7528;"></a>Mybatis Generator&#x4F7F;&#x7528;</h2><h3 id="pom&#x5F15;&#x5165;"><a href="#pom&#x5F15;&#x5165;-1" class="headerlink" title="pom&#x5F15;&#x5165;"></a>pom&#x5F15;&#x5165;</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- http://mvnrepository.com/artifact/org.mybatis.generator/mybatis-generator-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.generator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-generator-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="&#x914D;&#x7F6E;generatorconfigxml"><a href="#&#x914D;&#x7F6E;generatorConfig-xml" class="headerlink" title="&#x914D;&#x7F6E;generatorConfig.xml"></a>&#x914D;&#x7F6E;generatorConfig.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span><span class="meta">?&gt;</span></span>  </span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration  </span><br><span class="line">  PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;  </span><br><span class="line">  &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span>  </span><br><span class="line">	<span class="comment">&lt;!-- classPathEntry:&#x6570;&#x636E;&#x5E93;&#x7684;JDBC&#x9A71;&#x52A8;--&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--&lt;classPathEntry location=&quot;./lib/mysql-connector-java-5.1.38.jar&quot; /&gt;   --&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">&quot;DB2Tables&quot;</span> <span class="attr">targetRuntime</span>=<span class="string">&quot;MyBatis3&quot;</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!--&#x5B9E;&#x4F53;&#x7C7B;&#x5B9E;&#x73B0;&#x5E8F;&#x5217;&#x5316;--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">plugin</span> <span class="attr">type</span>=<span class="string">&quot;org.mybatis.generator.plugins.SerializablePlugin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span> </span><br><span class="line">		</span><br><span class="line">	<span class="comment">&lt;!--&lt;plugin type=&quot;org.mybatis.generator.plugins.MysqlPaginationPlugin&quot;&gt;&lt;/plugin&gt;  --&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- &#x53BB;&#x9664;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x7684;&#x6CE8;&#x91CA; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suppressAllComments&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	 <span class="comment">&lt;!-- &#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x914D;&#x7F6E;--&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">&quot;com.mysql.jdbc.Driver&quot;</span></span><br><span class="line">        <span class="attr">connectionURL</span>=<span class="string">&quot;jdbc:mysql://127.0.0.1:3306/mybatis&quot;</span></span><br><span class="line">        <span class="attr">userId</span>=<span class="string">&quot;root&quot;</span></span><br><span class="line">        <span class="attr">password</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;forceBigDecimals&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">	<span class="comment">&lt;!-- model &#x4EE3;&#x7801;&#x751F;&#x6210;&#x4F4D;&#x7F6E; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.github.dzhai.model&quot;</span> <span class="attr">targetProject</span>=<span class="string">&quot;D:\gitproject\framework-study\mybatis3\mybatis3\src\main\java&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;trimStrings&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- mapper.xml &#x4EE3;&#x7801;&#x751F;&#x6210;&#x4F4D;&#x7F6E; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.github.dzhai.mapper&quot;</span>  <span class="attr">targetProject</span>=<span class="string">&quot;D:\gitproject\framework-study\mybatis3\mybatis3\src\main\java&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- mapper.java &#x4EE3;&#x7801;&#x751F;&#x6210;&#x4F4D;&#x7F6E; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">&quot;XMLMAPPER&quot;</span> <span class="attr">targetPackage</span>=<span class="string">&quot;com.github.dzhai.mapper&quot;</span>  <span class="attr">targetProject</span>=<span class="string">&quot;D:\gitproject\framework-study\mybatis3\mybatis3\src\main\java&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;enableSubPackages&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">javaClientGenerator</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- &#x6570;&#x636E;&#x5E93;&#x8868;&#x914D;&#x7F6E; --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- tableName:&#x7528;&#x4E8E;&#x81EA;&#x52A8;&#x751F;&#x6210;&#x4EE3;&#x7801;&#x7684;&#x6570;&#x636E;&#x5E93;&#x8868;&#xFF1B;domainObjectName:&#x5BF9;&#x5E94;&#x4E8E;&#x6570;&#x636E;&#x5E93;&#x8868;&#x7684;javaBean&#x7C7B;&#x540D; --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;user&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;User&quot;</span> <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">sqlStatement</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;items&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Items&quot;</span> <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">sqlStatement</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;orderdetail&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;OrderDetail&quot;</span> <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">sqlStatement</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">&quot;orders&quot;</span> <span class="attr">domainObjectName</span>=<span class="string">&quot;Orders&quot;</span> <span class="attr">enableCountByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableUpdateByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableDeleteByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">enableSelectByExample</span>=<span class="string">&quot;false&quot;</span> <span class="attr">selectByExampleQueryId</span>=<span class="string">&quot;false&quot;</span>&gt;</span>	</span><br><span class="line">		<span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">sqlStatement</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="&#x6DFB;&#x52A0;java&#x6267;&#x884C;&#x65B9;&#x6CD5;"><a href="#&#x6DFB;&#x52A0;java&#x6267;&#x884C;&#x65B9;&#x6CD5;" class="headerlink" title="&#x6DFB;&#x52A0;java&#x6267;&#x884C;&#x65B9;&#x6CD5;"></a>&#x6DFB;&#x52A0;java&#x6267;&#x884C;&#x65B9;&#x6CD5;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisGeneratorMain</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">		List&lt;String&gt; warnings = <span class="keyword">new</span> ArrayList&lt;String&gt;();</span><br><span class="line">		<span class="keyword">boolean</span> overwrite = <span class="keyword">true</span>;</span><br><span class="line">		InputStream configIn = MyBatisGeneratorMain.class.getClassLoader().getResourceAsStream(<span class="string">&quot;generatorConfig.xml&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		ConfigurationParser cp = <span class="keyword">new</span> ConfigurationParser(warnings);</span><br><span class="line">		Configuration config = cp.parseConfiguration(configIn);</span><br><span class="line">		DefaultShellCallback callback = <span class="keyword">new</span> DefaultShellCallback(overwrite);</span><br><span class="line">		MyBatisGenerator myBatisGenerator = <span class="keyword">new</span> MyBatisGenerator(config, callback, warnings);</span><br><span class="line">		myBatisGenerator.generate(<span class="keyword">null</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;finish......&quot;</span>);</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure> <h2 id="mybatis&#x57FA;&#x672C;&#x4F7F;&#x7528;"><a href="#Mybatis&#x57FA;&#x672C;&#x4F7F;&#x7528;" class="headerlink" title="Mybatis&#x57FA;&#x672C;&#x4F7F;&#x7528;"></a>Mybatis&#x57FA;&#x672C;&#x4F7F;&#x7528;</h2><h3 id="&#x5355;&#x5143;&#x6D4B;&#x8BD5;"><a href="#&#x5355;&#x5143;&#x6D4B;&#x8BD5;" class="headerlink" title="&#x5355;&#x5143;&#x6D4B;&#x8BD5;"></a>&#x5355;&#x5143;&#x6D4B;&#x8BD5;</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseTestCase</span> </span>{</span><br><span class="line"></span><br><span class="line">	<span class="keyword">protected</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">protected</span> Logger log=LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Before</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">before</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>{</span><br><span class="line">		<span class="comment">// mybatis&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></span><br><span class="line">		String resource = <span class="string">&quot;mybatis-config.xml&quot;</span>;</span><br><span class="line">		<span class="comment">// &#x5F97;&#x5230;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6D41;</span></span><br><span class="line">		InputStream inputStream = Resources.getResourceAsStream(resource);</span><br><span class="line">		<span class="comment">// &#x521B;&#x5EFA;&#x4F1A;&#x8BDD;&#x5DE5;&#x5382;SqlSessionFactory,&#x8981;&#x4F20;&#x5165;mybaits&#x7684;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x7684;&#x6D41;</span></span><br><span class="line">		sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserMapperTestCase</span> <span class="keyword">extends</span> <span class="title">BaseTestCase</span> </span>{</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">selectByPrimaryKey</span><span class="params">()</span> </span>{</span><br><span class="line">		SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">		<span class="comment">// &#x521B;&#x5EFA;UserMapper&#x5BF9;&#x8C61;&#xFF0C;mybatis&#x81EA;&#x52A8;&#x751F;&#x6210;mapper&#x4EE3;&#x7406;&#x5BF9;&#x8C61;</span></span><br><span class="line">		UserMapper userMapper = sqlSession.getMapper(UserMapper.class);</span><br><span class="line">		User user = userMapper.selectByPrimaryKey(<span class="number">1</span>);</span><br><span class="line">		sqlSession.close();<span class="comment">//&#x5E94;&#x6539;&#x653E;&#x5728;finally&#x4E2D;</span></span><br><span class="line">		log.info(user.toString());</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure> <h3 id="&#x5173;&#x8054;&#x67E5;&#x8BE2;"><a href="#&#x5173;&#x8054;&#x67E5;&#x8BE2;" class="headerlink" title="&#x5173;&#x8054;&#x67E5;&#x8BE2;"></a>&#x5173;&#x8054;&#x67E5;&#x8BE2;</h3><h4 id="one2one"><a href="#one2one" class="headerlink" title="one2one"></a>one2one</h4><ol> <li><p>&#x57FA;&#x4E8E;resultType</p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findOrdersUserResultType&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.github.dzhai.model.OrdersUser&quot;</span>&gt;</span></span><br><span class="line">    SELECT </span><br><span class="line">        o.*,</span><br><span class="line">        u.username,</span><br><span class="line">        u.sex,</span><br><span class="line">        u.address</span><br><span class="line">     FROM</span><br><span class="line">        orders o,</span><br><span class="line">        user u</span><br><span class="line">    WHERE o.user_id = u.id </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure> </li> <li><p>&#x57FA;&#x4E8E;resultMap <strong>association</strong></p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.github.dzhai.model.Orders&quot;</span> <span class="attr">id</span>=<span class="string">&quot;OrdersUserResultMap&quot;</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x6620;&#x5C04;&#x8BA2;&#x5355;&#x4FE1;&#x606F; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;number&quot;</span> <span class="attr">property</span>=<span class="string">&quot;number&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;createtime&quot;</span> <span class="attr">property</span>=<span class="string">&quot;createtime&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;note&quot;</span> <span class="attr">property</span>=<span class="string">&quot;note&quot;</span>/&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x6620;&#x5C04;&#x7684;&#x5173;&#x8054;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F; --&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- association&#x7528;&#x4E8E;&#x6620;&#x5C04;&#x5173;&#x8054;&#x67E5;&#x8BE2;&#x5355;&#x4E2A;&#x5BF9;&#x8C61;&#x7684;&#x4FE1;&#x606F;</span><br><span class="line">	     property&#xFF1A;&#x8981;&#x5C06;&#x5173;&#x8054;&#x67E5;&#x8BE2;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x6620;&#x5C04;&#x5230;Orders&#x4E2D;&#x7684;&#x54EA;&#x4E2A;&#x5C5E;&#x6027;</span><br><span class="line">	     javaType&#xFF1A;&#x8BE5;&#x5C5E;&#x6027;&#x7684;&#x7C7B;&#x578B;</span><br><span class="line">	 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;user&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.github.dzhai.model.User&quot;</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;address&quot;</span> <span class="attr">property</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findOrdersUserResultMap&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;OrdersUserResultMap&quot;</span>&gt;</span></span><br><span class="line">    SELECT </span><br><span class="line">        o.*,</span><br><span class="line">        u.username,</span><br><span class="line">        u.sex,</span><br><span class="line">        u.address</span><br><span class="line">    FROM</span><br><span class="line">        orders o,</span><br><span class="line">        user u</span><br><span class="line">    WHERE o.user_id = u.id </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure> </li> </ol> <h4 id="one2many"><a href="#one2many" class="headerlink" title="one2many"></a>one2many</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.github.dzhai.model.Orders&quot;</span> <span class="attr">id</span>=<span class="string">&quot;OrdersAndOrderDetailResultMap&quot;</span> <span class="attr">extends</span>=<span class="string">&quot;OrdersUserResultMap&quot;</span>&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x6620;&#x5C04;&#x8BA2;&#x5355;&#x4FE1;&#x606F;&#x548C;&#x5173;&#x8054;&#x7684;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x548C;&#x4E0A;&#x9762;&#x7684;&#x4E00;&#x6837;&#xFF0C;&#x7EE7;&#x627F;&#x4E0A;&#x9762;&#x7684;&#x5373;&#x53EF; --&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x5173;&#x8054;&#x7684;&#x8BA2;&#x5355;&#x660E;&#x7EC6;&#x4FE1;&#x606F; --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;orderdetails&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.github.dzhai.model.OrderDetail&quot;</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;orderdetail_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;items_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;itemsId&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;items_num&quot;</span> <span class="attr">property</span>=<span class="string">&quot;itemsNum&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;orders_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ordersId&quot;</span>/&gt;</span></span><br><span class="line">	 <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findOrdersAndOrderDetailResultMap&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;OrdersAndOrderDetailResultMap&quot;</span>&gt;</span></span><br><span class="line">   	SELECT </span><br><span class="line">	  o.*,</span><br><span class="line">	  u.username,</span><br><span class="line">	  u.sex,</span><br><span class="line">	  u.address,</span><br><span class="line">	  od.id orderdetail_id,</span><br><span class="line">	  od.items_id,</span><br><span class="line">	  od.items_num,</span><br><span class="line">	  od.orders_id </span><br><span class="line">	FROM</span><br><span class="line">	  orders o,</span><br><span class="line">	  user u,</span><br><span class="line">	  orderdetail od </span><br><span class="line">	WHERE </span><br><span class="line">		o.user_id = u.id </span><br><span class="line">		AND o.id = od.orders_id </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure> <h4 id="many2many"><a href="#many2many" class="headerlink" title="many2many"></a>many2many</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">type</span>=<span class="string">&quot;com.github.dzhai.model.User&quot;</span> <span class="attr">id</span>=<span class="string">&quot;UserAndItemsResultMap&quot;</span>&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!-- &#x7528;&#x6237;&#x4FE1;&#x606F; --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">property</span>=<span class="string">&quot;sex&quot;</span>/&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;address&quot;</span> <span class="attr">property</span>=<span class="string">&quot;address&quot;</span>/&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!-- &#x8BA2;&#x5355;&#x4FE1;&#x606F; --&gt;</span></span><br><span class="line">	 <span class="comment">&lt;!-- &#x4E00;&#x4E2A;&#x7528;&#x6237;&#x5BF9;&#x5E94;&#x591A;&#x4E2A;&#x8BA2;&#x5355;&#xFF0C;&#x4F7F;&#x7528;collection --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;ordersList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.github.dzhai.model.Orders&quot;</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;user_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;userId&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;number&quot;</span> <span class="attr">property</span>=<span class="string">&quot;number&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;createtime&quot;</span> <span class="attr">property</span>=<span class="string">&quot;createtime&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;note&quot;</span> <span class="attr">property</span>=<span class="string">&quot;note&quot;</span>/&gt;</span></span><br><span class="line">	   <span class="comment">&lt;!-- &#x8BA2;&#x5355;&#x660E;&#x7EC6;&#x4FE1;&#x606F; --&gt;</span></span><br><span class="line">	   <span class="comment">&lt;!-- &#x4E00;&#x4E2A;&#x8BA2;&#x5355;&#x5305;&#x62EC;&#x591A;&#x4E2A;&#x660E;&#x7EC6;&#xFF0C;&#x4F7F;&#x7528;collection --&gt;</span></span><br><span class="line">	   <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;orderdetails&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.github.dzhai.model.OrderDetail&quot;</span>&gt;</span></span><br><span class="line">	       <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;orderdetail_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;items_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;itemsId&quot;</span>/&gt;</span></span><br><span class="line">	       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;items_num&quot;</span> <span class="attr">property</span>=<span class="string">&quot;itemsNum&quot;</span>/&gt;</span></span><br><span class="line">	       <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;orders_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;ordersId&quot;</span>/&gt;</span></span><br><span class="line">	       <span class="comment">&lt;!-- &#x5546;&#x54C1;&#x4FE1;&#x606F; --&gt;</span></span><br><span class="line">	       <span class="comment">&lt;!-- &#x4E00;&#x4E2A;&#x660E;&#x7EC6;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x5546;&#x54C1;&#x4FE1;&#x606F;&#xFF0C;&#x4F7F;&#x7528;association --&gt;</span></span><br><span class="line">	       <span class="tag">&lt;<span class="name">association</span> <span class="attr">property</span>=<span class="string">&quot;items&quot;</span> <span class="attr">javaType</span>=<span class="string">&quot;com.github.dzhai.model.Items&quot;</span>&gt;</span></span><br><span class="line">	         <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;items_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">	         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;items_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span>/&gt;</span></span><br><span class="line">	         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;items_detail&quot;</span> <span class="attr">property</span>=<span class="string">&quot;detail&quot;</span>/&gt;</span></span><br><span class="line">	         <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;items_price&quot;</span> <span class="attr">property</span>=<span class="string">&quot;price&quot;</span>/&gt;</span></span><br><span class="line">	       <span class="tag">&lt;/<span class="name">association</span>&gt;</span></span><br><span class="line">	   <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;findUserAndItemsResultMap&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;UserAndItemsResultMap&quot;</span>&gt;</span></span><br><span class="line">	SELECT </span><br><span class="line">		  o.*,</span><br><span class="line">		  u.username,</span><br><span class="line">		  u.sex,</span><br><span class="line">		  u.address,</span><br><span class="line">		  od.id orderdetail_id,</span><br><span class="line">		  od.items_id,</span><br><span class="line">		  od.items_num,</span><br><span class="line">		  od.orders_id,</span><br><span class="line">		  i.name items_name,</span><br><span class="line">		  i.detail items_detail,</span><br><span class="line">		  i.price items_price </span><br><span class="line">	FROM</span><br><span class="line">		  orders o,</span><br><span class="line">		  USER u,</span><br><span class="line">		  orderdetail od,</span><br><span class="line">		  items i </span><br><span class="line">	WHERE o.user_id = u.id </span><br><span class="line">		  AND o.id = od.orders_id </span><br><span class="line">		  AND od.items_id = i.id </span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure> <h2 id="mybatis&#x7F13;&#x5B58;"><a href="#Mybatis&#x7F13;&#x5B58;" class="headerlink" title="Mybatis&#x7F13;&#x5B58;"></a>Mybatis&#x7F13;&#x5B58;</h2><p><img src="/resource/images/20160622/cache.png" alt="Mybatis&#x7F13;&#x5B58;"></p> <ol> <li>&#x4E00;&#x7EA7;&#x7F13;&#x5B58;&#x662F;SqlSession&#x7EA7;&#x522B;&#x7684;&#x7F13;&#x5B58;&#x3002;&#x5728;&#x64CD;&#x4F5C;&#x6570;&#x636E;&#x5E93;&#x65F6;&#x9700;&#x8981;&#x6784;&#x9020;sqlSession&#x5BF9;&#x8C61;&#xFF0C;&#x5728;&#x5BF9;&#x8C61;&#x4E2D;&#x6709;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF08;HashMap&#xFF09;&#x7528;&#x4E8E;&#x5B58;&#x50A8;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x3002;&#x4E0D;&#x540C;&#x7684;sqlSession&#x4E4B;&#x95F4;&#x7684;&#x7F13;&#x5B58;&#x6570;&#x636E;&#x533A;&#x57DF;&#xFF08;HashMap&#xFF09;&#x662F;&#x4E92;&#x76F8;&#x4E0D;&#x5F71;&#x54CD;&#x7684;&#x3002;</li> <li>&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x662F;mapper&#x7EA7;&#x522B;&#x7684;&#x7F13;&#x5B58;&#xFF0C;&#x591A;&#x4E2A;SqlSession&#x53BB;&#x64CD;&#x4F5C;&#x540C;&#x4E00;&#x4E2A;Mapper&#x7684;sql&#x8BED;&#x53E5;&#xFF0C;&#x591A;&#x4E2A;SqlSession&#x53EF;&#x4EE5;&#x5171;&#x7528;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#xFF0C;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;&#x662F;&#x8DE8;SqlSession&#x7684;&#x3002;<h3 id="&#x4E00;&#x7EA7;&#x7F13;&#x5B58;"><a href="#&#x4E00;&#x7EA7;&#x7F13;&#x5B58;" class="headerlink" title="&#x4E00;&#x7EA7;&#x7F13;&#x5B58;"></a>&#x4E00;&#x7EA7;&#x7F13;&#x5B58;</h3><a href="http://blog.csdn.net/eson_15/article/details/51669021" target="_blank" rel="external">MyBatis&#x4E2D;&#x7684;&#x4E00;&#x7EA7;&#x7F13;&#x5B58;</a><h3 id="&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;"><a href="#&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;" class="headerlink" title="&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;"></a>&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;</h3><a href="http://blog.csdn.net/eson_15/article/details/51669608" target="_blank" rel="external">MyBatis&#x4E2D;&#x7684;&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;</a><br>mybatis&#x5B98;&#x65B9;&#x63D0;redis-cache&#x4E8C;&#x7EA7;&#x7F13;&#x5B58;</li> </ol> <h2 id="mybatis-spring"><a href="#Mybatis-spring" class="headerlink" title="Mybatis-spring"></a>Mybatis-spring</h2><h3 id="mybatis-configxml"><a href="#mybatis-config-xml" class="headerlink" title="mybatis-config.xml"></a>mybatis-config.xml</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> <span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x5168;&#x5C40;&#x6620;&#x5C04;&#x5668;&#x542F;&#x7528;&#x7F13;&#x5B58; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;cacheEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x67E5;&#x8BE2;&#x65F6;&#xFF0C;&#x5173;&#x95ED;&#x5173;&#x8054;&#x5BF9;&#x8C61;&#x5373;&#x65F6;&#x52A0;&#x8F7D;&#x4EE5;&#x63D0;&#x9AD8;&#x6027;&#x80FD; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">setting</span> <span class="attr">name</span>=<span class="string">&quot;lazyLoadingEnabled&quot;</span> <span class="attr">value</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">plugin</span> <span class="attr">interceptor</span>=<span class="string">&quot;com.github.miemiedev.mybatis.paginator.OffsetLimitInterceptor&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dialectClass&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.github.miemiedev.mybatis.paginator.dialect.MySQLDialect&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="&#x6570;&#x636E;&#x5E93;&#x94FE;&#x63A5;&#x914D;&#x7F6E;"><a href="#&#x6570;&#x636E;&#x5E93;&#x94FE;&#x63A5;&#x914D;&#x7F6E;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x94FE;&#x63A5;&#x914D;&#x7F6E;"></a>&#x6570;&#x636E;&#x5E93;&#x94FE;&#x63A5;&#x914D;&#x7F6E;</h3><p><strong>applicationContext-mybatis.xml</strong><br>&#x4F7F;&#x7528;druid&#x6570;&#x636E;&#x5E93;&#x8FDE;&#x63A5;&#x6C60;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line"> 	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans </span><br><span class="line">	http://www.springframework.org/schema/beans/spring-beans-4.2.xsd&quot;</span></span><br><span class="line">	&gt;</span></span><br><span class="line">	 </span><br><span class="line"> 	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span> <span class="attr">init-method</span>=<span class="string">&quot;init&quot;</span> <span class="attr">destroy-method</span>=<span class="string">&quot;close&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x6570;&#x636E;&#x5E93;&#x57FA;&#x672C;&#x4FE1;&#x606F;&#x914D;&#x7F6E; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driverClassName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.driverClassName}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.url}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.username}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.password}&quot;</span> /&gt;</span>       </span><br><span class="line">        <span class="comment">&lt;!-- &#x521D;&#x59CB;&#x5316;&#x8FDE;&#x63A5;&#x6570;&#x91CF; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;initialSize&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.minPoolSize}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x6700;&#x5927;&#x5E76;&#x53D1;&#x8FDE;&#x63A5;&#x6570; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxActive&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.maxPoolSize}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x6700;&#x5927;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x6570; --&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--  &lt;property name=&quot;maxIdle&quot; value=&quot;${jdbc.maxIdleTime}&quot; /&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x6700;&#x5C0F;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#x6570; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.minIdleTime}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x83B7;&#x53D6;&#x8FDE;&#x63A5;&#x7B49;&#x5F85;&#x8D85;&#x65F6;&#x7684;&#x65F6;&#x95F4; --&gt;</span>     </span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;maxWait&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.maxWait}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x8D85;&#x8FC7;&#x65F6;&#x95F4;&#x9650;&#x5236;&#x662F;&#x5426;&#x56DE;&#x6536; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;removeAbandoned&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.removeAbandoned}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x8D85;&#x8FC7;&#x65F6;&#x95F4;&#x9650;&#x5236;&#x591A;&#x957F;&#xFF1B; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;removeAbandonedTimeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.removeAbandonedTimeout}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x95F4;&#x9694;&#x591A;&#x4E45;&#x624D;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x68C0;&#x6D4B;&#xFF0C;&#x68C0;&#x6D4B;&#x9700;&#x8981;&#x5173;&#x95ED;&#x7684;&#x7A7A;&#x95F2;&#x8FDE;&#x63A5;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x6BEB;&#x79D2; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;timeBetweenEvictionRunsMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.timeBetweenEvictionRunsMillis}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x8FDE;&#x63A5;&#x5728;&#x6C60;&#x4E2D;&#x6700;&#x5C0F;&#x751F;&#x5B58;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x5355;&#x4F4D;&#x662F;&#x6BEB;&#x79D2; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;minEvictableIdleTimeMillis&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.minEvictableIdleTimeMillis}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x7528;&#x6765;&#x68C0;&#x6D4B;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x6709;&#x6548;&#x7684;sql&#xFF0C;&#x8981;&#x6C42;&#x662F;&#x4E00;&#x4E2A;&#x67E5;&#x8BE2;&#x8BED;&#x53E5;--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;validationQuery&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.validationQuery}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x7533;&#x8BF7;&#x8FDE;&#x63A5;&#x7684;&#x65F6;&#x5019;&#x68C0;&#x6D4B; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testWhileIdle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.testWhileIdle}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x7533;&#x8BF7;&#x8FDE;&#x63A5;&#x65F6;&#x6267;&#x884C;validationQuery&#x68C0;&#x6D4B;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x6709;&#x6548;&#xFF0C;&#x914D;&#x7F6E;&#x4E3A;true&#x4F1A;&#x964D;&#x4F4E;&#x6027;&#x80FD; --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testOnBorrow&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.testOnBorrow}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x5F52;&#x8FD8;&#x8FDE;&#x63A5;&#x65F6;&#x6267;&#x884C;validationQuery&#x68C0;&#x6D4B;&#x8FDE;&#x63A5;&#x662F;&#x5426;&#x6709;&#x6548;&#xFF0C;&#x914D;&#x7F6E;&#x4E3A;true&#x4F1A;&#x964D;&#x4F4E;&#x6027;&#x80FD;  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;testOnReturn&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.testOnReturn}&quot;</span> /&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- &#x6253;&#x5F00;PSCache&#xFF0C;&#x5E76;&#x4E14;&#x6307;&#x5B9A;&#x6BCF;&#x4E2A;&#x8FDE;&#x63A5;&#x4E0A;PSCache&#x7684;&#x5927;&#x5C0F; oracle&#x4F7F;&#x7528;</span><br><span class="line">        &lt;property name=&quot;poolPreparedStatements&quot; value=&quot;${jdbc.poolPreparedStatements}&quot; /&gt;    </span><br><span class="line">        &lt;property name=&quot;maxPoolPreparedStatementPerConnectionSize&quot; value=&quot;${jdbc.maxPoolPreparedStatementPerConnectionSize}&quot; /&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&#x5C5E;&#x6027;&#x7C7B;&#x578B;&#x662F;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x901A;&#x8FC7;&#x522B;&#x540D;&#x7684;&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x6269;&#x5C55;&#x63D2;&#x4EF6;&#xFF0C;&#x5E38;&#x7528;&#x7684;&#x63D2;&#x4EF6;&#x6709;&#xFF1A;                </span><br><span class="line">	                &#x76D1;&#x63A7;&#x7EDF;&#x8BA1;&#x7528;&#x7684;filter:stat</span><br><span class="line">	                &#x65E5;&#x5FD7;&#x7528;&#x7684;filter:log4j</span><br><span class="line">	               &#x9632;&#x5FA1;SQL&#x6CE8;&#x5165;&#x7684;filter:wall --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;filters&quot;</span> <span class="attr">value</span>=<span class="string">&quot;${jdbc.filters}&quot;</span> /&gt;</span>      </span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--MyBatis integration with Spring as define sqlSessionFactory --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;configLocation&quot;</span> <span class="attr">value</span>=<span class="string">&quot;classpath:spring/mybatis-config.xml&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;sqlSessionFactoryBeanName&quot;</span> <span class="attr">value</span>=<span class="string">&quot;sqlSessionFactory&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;basePackage&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.github.dzhai.mapper&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p> <h3 id="&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x914D;&#x7F6E;"><a href="#&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x914D;&#x7F6E;" class="headerlink" title="&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x914D;&#x7F6E;"></a>&#x6570;&#x636E;&#x5E93;&#x4E8B;&#x52A1;&#x914D;&#x7F6E;</h3><p><strong>applicationContext-transaction.xml</strong><br>AOP&#x65B9;&#x5F0F;&#x914D;&#x7F6E;&#x4E8B;&#x52A1;<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="line">	<span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="line">	<span class="attr">xmlns:aop</span>=<span class="string">&quot;http://www.springframework.org/schema/aop&quot;</span></span><br><span class="line">	<span class="attr">xmlns:context</span>=<span class="string">&quot;http://www.springframework.org/schema/context&quot;</span></span><br><span class="line">	<span class="attr">xmlns:tx</span>=<span class="string">&quot;http://www.springframework.org/schema/tx&quot;</span></span><br><span class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/aop </span><br><span class="line">		http://www.springframework.org/schema/aop/spring-aop-4.2.xsd</span><br><span class="line">		http://www.springframework.org/schema/beans </span><br><span class="line">		http://www.springframework.org/schema/beans/spring-beans-4.2.xsd</span><br><span class="line">		http://www.springframework.org/schema/tx </span><br><span class="line">		http://www.springframework.org/schema/tx/spring-tx-4.2.xsd</span><br><span class="line">		http://www.springframework.org/schema/context </span><br><span class="line">		http://www.springframework.org/schema/context/spring-context-4.2.xsd&quot;</span></span><br><span class="line">		<span class="attr">default-lazy-init</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;transactionManager&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span> <span class="attr">abstract</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;dataSource&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;dataSource&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">transaction-manager</span>=<span class="string">&quot;transactionManager&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;insert*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.Exception&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;add*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>    <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.Exception&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;delete*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.Exception&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;update*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.Exception&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;save*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>   <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.Exception&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;save*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span>   <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.Exception&quot;</span> /&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">&quot;modify*&quot;</span> <span class="attr">propagation</span>=<span class="string">&quot;REQUIRED&quot;</span> <span class="attr">rollback-for</span>=<span class="string">&quot;java.lang.Exception&quot;</span>/&gt;</span>				</span><br><span class="line">		<span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- &#x64CD;&#x4F5C;&#x4E8B;&#x52A1;&#x914D;&#x7F6E;&#x5F00;&#x59CB; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- &#x914D;&#x7F6E;&#x6709;&#x90A3;&#x4E9B;&#x7C7B;&#x4E2D;&#x7684;&#x65B9;&#x6CD5;&#x62E5;&#x6709;&#x4E8B;&#x52A1;&#x7684;&#x4F20;&#x64AD;&#x6027; --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">id</span>=<span class="string">&quot;txPointcut&quot;</span></span><br><span class="line">			<span class="attr">expression</span>=<span class="string">&quot;execution(* com.github.dzhai.service.*.*(..))			</span><br><span class="line">			&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="comment">&lt;!-- &#x4E8B;&#x52A1;AOP --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">&quot;txAdvice&quot;</span> <span class="attr">pointcut-ref</span>=<span class="string">&quot;txPointcut&quot;</span> <span class="attr">order</span>=<span class="string">&quot;100&quot;</span> /&gt;</span>	</span><br><span class="line">	<span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure></p> <h2 id="&#x5176;&#x4ED6;"><a href="#&#x5176;&#x4ED6;" class="headerlink" title="&#x5176;&#x4ED6;"></a>&#x5176;&#x4ED6;</h2><p><strong>like</strong><br><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">select</span> id=<span class="string">&quot;selectBlogsLike&quot;</span> resultType=<span class="string">&quot;Blog&quot;</span>&gt;</span><br><span class="line">  &lt;bind name=<span class="string">&quot;pattern&quot;</span> value=<span class="string">&quot;&apos;%&apos; + _parameter.getTitle() + &apos;%&apos;&quot;</span> /&gt;</span><br><span class="line">  <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> BLOG</span><br><span class="line">  <span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> <span class="meta">#{pattern}</span></span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;<span class="keyword">select</span> id=<span class="string">&quot;selectBlogsLike&quot;</span> resultType=<span class="string">&quot;Blog&quot;</span>&gt;</span><br><span class="line">  <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> BLOG</span><br><span class="line">  <span class="keyword">WHERE</span> title <span class="keyword">LIKE</span> CONCAT(<span class="comment">&apos;%&apos;,#{title},&apos;%&apos; )</span></span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure></p> <p><strong>if &#x5224;&#x65AD;int</strong><br><strong>&#x6279;&#x91CF;&#x66F4;&#x65B0;foreach</strong></p> <h2 id="link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><p><a href="http://www.mybatis.org/mybatis-3/zh/index.html" target="_blank" rel="external">Mybatis&#x5B98;&#x65B9;&#x4E2D;&#x6587;&#x6587;&#x6863;</a><br><a href="http://www.mybatis.org/generator/" target="_blank" rel="external">Mybatis Generator&#x5B98;&#x65B9;&#x6587;&#x6863;</a><br><a href="http://www.mybatis.org/redis-cache/" target="_blank" rel="external">Redis Cache&#x5B98;&#x65B9;&#x6587;&#x6863;</a><br><a href="http://www.mybatis.tk/" target="_blank" rel="external">MyBatis&#x76F8;&#x5173;&#x5DE5;&#x5177;</a><br><a href="http://blog.csdn.net/column/details/smybatis.html" target="_blank" rel="external">MyBatis&#x5B66;&#x4E60;</a><br><a href="http://blog.csdn.net/column/details/mybatis-principle.html" target="_blank" rel="external">&#x6DF1;&#x5165;&#x7406;&#x89E3;MyBatis&#x539F;&#x7406;</a><br><a href="http://www.cnblogs.com/mengheng/p/3739610.html" target="_blank" rel="external">MyBatis&#x67B6;&#x6784;&#x8BBE;&#x8BA1;&#x53CA;&#x6E90;&#x4EE3;&#x7801;&#x5206;&#x6790;&#x7CFB;&#x5217;</a></p> </div> <script type="text/javascript">function rewardButtonClick(){var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"}</script><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"> <div></div> <button id="rewardButton" disable="enable" onclick="rewardButtonClick()" style="cursor:pointer;border:0;outline:0;border-radius:100%;padding:0;margin:0;letter-spacing:normal;text-transform:none;text-indent:0;text-shadow:none"> <span onmouseover="this.style.color=&quot;rgb(236,96,0)&quot;,this.style.background=&quot;rgb(204,204,204)&quot" onmouseout="this.style.color=&quot;#fff&quot;,this.style.background=&quot;rgb(236,96,0)&quot" style="display:inline-block;width:70px;height:70px;border-radius:100%;line-height:81px;color:#fff;font:400 35px/75px microsofty;background:#ec6000">赏</span> </button> <div id="QR" style="display:none"> <div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/resource/images/reward/wechat.png" alt="翟春龙 WeChat Pay" style="width:200px;max-width:100%;display:inline-block"> <p>微信打赏</p> </div> <div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/resource/images/reward/alipay.png" alt="翟春龙 Alipay" style="width:200px;max-width:100%;display:inline-block"> <p>支付宝打赏</p> </div> </div> <div></div></div> <footer> <div class="alignleft"> <div class="categories"> <a href="/categories/Mybatis/">Mybatis</a> </div> <div class="tags"> <a href="/tags/Mybatis/">Mybatis</a> </div> </div> <div class="alignright"> <div style="z-index:1000000"> <div class="ds-share flat" data-thread-key="2016/06/22/Mybatis使用/" data-title="Mybatis使用" data-content="" data-url="http://www.dzhai.net/2016/06/22/Mybatis使用/"> <div class="ds-share-inline"> <ul class="ds-share-icons-16"> <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li> <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li> <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li> <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li> <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li> </ul> <div class="ds-share-icons-more"> </div> </div> </div> </div> </div> <div class="clearfix"></div> </footer> </div> </article> <section id="comment"> <!-- Duoshuo Comment BEGIN --> <div class="ds-thread" data-thread-key="2016/06/22/Mybatis使用/"></div> <script type="text/javascript">var duoshuoQuery={short_name:"dzhai"};!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://static.duoshuo.com/embed.js",e.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><!-- Duoshuo Comment END --></section></div></div><div class="clearfix"></div> </div> <footer id="footer"><div class="inner"><div class="alignleft"> <p> &copy; 2016 dzhai </p> <p> <a href="https://github.com/imbyron/hexo-theme-daisy">Theme</a> By <a href="http://googleyixia.com">Byron</a> based on <a href="https://github.com/willerce/hexo-theme-noderce">Noderce</a>. </p> </div> <div class="clearfix"></div></div></footer> <script type="text/javascript"></script></body>