<!DOCTYPE HTML> <html> <head> <meta charset="utf-8"> <title>dzhai › sitemesh3使用及配置</title> <meta name="author" content="dzhai"> <meta name="description" content="大翟"> <meta name="keywords" content="sitemesh3使用及配置"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <meta property="og:title" content="sitemesh3使用及配置"> <meta property="og:site_name" content="dzhai"> <meta property="og:image" content="undefined"> <link href="/favicon.png" rel="icon"> <link rel="alternate" href="/atom.xml" title="dzhai" type="application/atom+xml"> <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"> <script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?de86f16e85759414cb73dd76433ae1b7";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script></head></html><body> <header id="header"><div class="meta inner"> <h1><a href="/">dzhai</a></h1> <h2 id="header-h2">宁静致远</h2> <nav id="main-nav"> <ul> <li><a href="/">首页</a></li> <li><a href="/archives">文章归档</a></li> <li><a href="/tags">标签</a></li> <li><a href="/links">友情链接</a></li> <li><a href="/about">关于</a></li> </ul> <div class="clearfix"></div> </nav> </div> <div class="clearfix"></div></header> <div id="content" class="inner"> <div id="main-col" class="alignleft"><div id="wrapper"><div id="toc" class="toc-article"> <strong class="toc-title">文章目录</strong> <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#sitemesh-3-简介"><span class="toc-number">1.</span> <span class="toc-text">Sitemesh 3 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用及配置说明"><span class="toc-number">2.</span> <span class="toc-text">使用及配置说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#在pom添加依赖"><span class="toc-number">2.1.</span> <span class="toc-text">在pom添加依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#webxml-添加拦截器"><span class="toc-number">2.2.</span> <span class="toc-text">web.xml 添加拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-sitemesh3xm-默认在web-infositemesh3xml-必须是这个名字-hard-code"><span class="toc-number">2.3.</span> <span class="toc-text">创建 sitemesh3.xm (默认在/WEB-INFO/sitemesh3.xml 必须是这个名字 Hard Code)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建模板文件-mainjsp"><span class="toc-number">2.4.</span> <span class="toc-text">创建模板文件 main.jsp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建-具体页面indexjsp"><span class="toc-number">2.5.</span> <span class="toc-text">创建 具体页面index.jsp</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#自定义tag"><span class="toc-number">2.6.</span> <span class="toc-text">自定义tag</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#运行项目-访问-indexjsp"><span class="toc-number">2.7.</span> <span class="toc-text">运行项目 访问 index.jsp</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#link"><span class="toc-number">3.</span> <span class="toc-text">Link</span></a></li></ol> </div> <article class="post"> <div class="post-content"> <header> <h1 class="title">sitemesh3使用及配置</h1> <time datetime="2016-05-30T09:56:20.000Z">2016-05-30</time> </header> <div class="entry"> <h2 id="sitemesh-3-&#x7B80;&#x4ECB;"><a href="#Sitemesh-3-&#x7B80;&#x4ECB;" class="headerlink" title="Sitemesh 3 &#x7B80;&#x4ECB;"></a>Sitemesh 3 &#x7B80;&#x4ECB;</h2><p>Sitemesh &#x662F;&#x4E00;&#x4E2A;&#x7F51;&#x9875;&#x5E03;&#x5C40;&#x548C;&#x4FEE;&#x9970;&#x7684;&#x6846;&#x67B6;&#xFF0C;&#x57FA;&#x4E8E; Servlet &#x4E2D;&#x7684; Filter<br><img src="/resource/images/20160530/sitemesh.png" alt="sitemesh"></p> <a id="more"></a> <h2 id="&#x4F7F;&#x7528;&#x53CA;&#x914D;&#x7F6E;&#x8BF4;&#x660E;"><a href="#&#x4F7F;&#x7528;&#x53CA;&#x914D;&#x7F6E;&#x8BF4;&#x660E;" class="headerlink" title="&#x4F7F;&#x7528;&#x53CA;&#x914D;&#x7F6E;&#x8BF4;&#x660E;"></a>&#x4F7F;&#x7528;&#x53CA;&#x914D;&#x7F6E;&#x8BF4;&#x660E;</h2><p>&#x9879;&#x76EE;demo&#x57FA;&#x4E8E;sitemesh-3.0.1</p> <h3 id="&#x5728;pom&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;"><a href="#&#x5728;pom&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;" class="headerlink" title="&#x5728;pom&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;"></a>&#x5728;pom&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.sitemesh<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>sitemesh<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="webxml-&#x6DFB;&#x52A0;&#x62E6;&#x622A;&#x5668;"><a href="#web-xml-&#x6DFB;&#x52A0;&#x62E6;&#x622A;&#x5668;" class="headerlink" title="web.xml &#x6DFB;&#x52A0;&#x62E6;&#x622A;&#x5668;"></a>web.xml &#x6DFB;&#x52A0;&#x62E6;&#x622A;&#x5668;</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>sitemesh<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.sitemesh.config.ConfigurableSiteMeshFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>sitemesh<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="&#x521B;&#x5EFA;-sitemesh3xm-&#x9ED8;&#x8BA4;&#x5728;web-infositemesh3xml-&#x5FC5;&#x987B;&#x662F;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;-hard-code"><a href="#&#x521B;&#x5EFA;-sitemesh3-xm-&#x9ED8;&#x8BA4;&#x5728;-WEB-INFO-sitemesh3-xml-&#x5FC5;&#x987B;&#x662F;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;-Hard-Code" class="headerlink" title="&#x521B;&#x5EFA; sitemesh3.xm (&#x9ED8;&#x8BA4;&#x5728;/WEB-INFO/sitemesh3.xml &#x5FC5;&#x987B;&#x662F;&#x8FD9;&#x4E2A;&#x540D;&#x5B57; Hard Code)"></a>&#x521B;&#x5EFA; sitemesh3.xm (&#x9ED8;&#x8BA4;&#x5728;/WEB-INFO/sitemesh3.xml &#x5FC5;&#x987B;&#x662F;&#x8FD9;&#x4E2A;&#x540D;&#x5B57; Hard Code)</h3><p>sitemesh3&#x63D0;&#x4F9B;2&#x79CD;&#x914D;&#x7F6E;&#x65B9;&#x5F0F; <strong>java&#x548C;xml</strong>&#xFF0C;&#x5177;&#x4F53;&#x8BF7;&#x770B;<a href="http://wiki.sitemesh.org/wiki/display/sitemesh3/Configuring+SiteMesh+3" target="_blank" rel="external">Configuring SiteMesh 3</a></p> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">sitemesh</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!--&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C; sitemesh &#x53EA;&#x5BF9; HTTP &#x54CD;&#x5E94;&#x5934;&#x4E2D; Content-Type &#x4E3A; text/html &#x7684;&#x7C7B;&#x578B;&#x8FDB;&#x884C;&#x62E6;&#x622A;&#x548C;&#x88C5;&#x9970;&#xFF0C; &#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x66F4;&#x591A;&#x7684; mime &#x7C7B;&#x578B; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mime-type</span>&gt;</span>text/html<span class="tag">&lt;/<span class="name">mime-type</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mime-type</span>&gt;</span>application/vnd.wap.xhtml+xml<span class="tag">&lt;/<span class="name">mime-type</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mime-type</span>&gt;</span>application/xhtml+xml<span class="tag">&lt;/<span class="name">mime-type</span>&gt;</span></span><br><span class="line"></span><br><span class="line">	 <span class="comment">&lt;!-- &#x9ED8;&#x8BA4;&#x88C5;&#x9970;&#x5668;&#xFF0C;&#x5F53;&#x4E0B;&#x9762;&#x7684;&#x8DEF;&#x5F84;&#x90FD;&#x4E0D;&#x5339;&#x914D;&#x65F6;&#xFF0C;&#x542F;&#x7528;&#x8BE5;&#x88C5;&#x9970;&#x5668;&#x8FDB;&#x884C;&#x88C5;&#x9970; --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">mapping</span> <span class="attr">decorator</span>=<span class="string">&quot;/defaulmain.jsp&quot;</span>/&gt;</span></span><br><span class="line">	  </span><br><span class="line">	<span class="comment">&lt;!-- &#x6307;&#x660E;&#x6EE1;&#x8DB3;&quot;*.jsp&quot;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x5C06;&#x88AB;&quot;main.jsp&quot;&#x6240;&#x88C5;&#x9970; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">path</span>=<span class="string">&quot;*.jsp&quot;</span> <span class="attr">decorator</span>=<span class="string">&quot;/views/sitemesh3/main.jsp&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- &#x6307;&#x660E;&#x6EE1;&#x8DB3;&quot;/exclude.jsp*&quot;&#x7684;&#x9875;&#x9762;&#xFF0C;&#x5C06;&#x88AB;&#x6392;&#x9664;&#xFF0C;&#x4E0D;&#x88AB;&#x88C5;&#x9970; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mapping</span> <span class="attr">path</span>=<span class="string">&quot;/exclude.jsp&quot;</span> <span class="attr">exclue</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">&lt;!-- &#x81EA;&#x5B9A;&#x4E49;&#x6807;&#x7B7E; --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">content-processor</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tag-rule-bundle</span> <span class="attr">class</span>=<span class="string">&quot;com.github.dzhai.sitemesh.tag.HeaderTagRuleBundle&quot;</span> /&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">tag-rule-bundle</span> <span class="attr">class</span>=<span class="string">&quot;com.github.dzhai.sitemesh.tag.FooterTagRuleBundle&quot;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">content-processor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sitemesh</span>&gt;</span></span><br></pre></td></tr></table></figure> <h3 id="&#x521B;&#x5EFA;&#x6A21;&#x677F;&#x6587;&#x4EF6;-mainjsp"><a href="#&#x521B;&#x5EFA;&#x6A21;&#x677F;&#x6587;&#x4EF6;-main-jsp" class="headerlink" title="&#x521B;&#x5EFA;&#x6A21;&#x677F;&#x6587;&#x4EF6; main.jsp"></a>&#x521B;&#x5EFA;&#x6A21;&#x677F;&#x6587;&#x4EF6; main.jsp</h3><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span> pageEncoding=<span class="string">&quot;utf-8&quot;</span></span><span class="xml"><span class="tag">%&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">sitemesh:write</span> <span class="attr">property</span>=<span class="string">&apos;title&apos;</span> /&gt;</span> -sitemesh<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sitemesh:write</span> <span class="attr">property</span>=<span class="string">&apos;head&apos;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">header</span>&gt;</span>header - <span class="tag">&lt;<span class="name">sitemesh:write</span> <span class="attr">property</span>=<span class="string">&apos;header&apos;</span> /&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">sitemesh:write</span> <span class="attr">property</span>=<span class="string">&apos;body&apos;</span> /&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">footer</span>&gt;</span>footer - <span class="tag">&lt;<span class="name">sitemesh:write</span> <span class="attr">property</span>=<span class="string">&apos;footer&apos;</span> /&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure> <h3 id="&#x521B;&#x5EFA;-&#x5177;&#x4F53;&#x9875;&#x9762;indexjsp"><a href="#&#x521B;&#x5EFA;-&#x5177;&#x4F53;&#x9875;&#x9762;index-jsp" class="headerlink" title="&#x521B;&#x5EFA; &#x5177;&#x4F53;&#x9875;&#x9762;index.jsp"></a>&#x521B;&#x5EFA; &#x5177;&#x4F53;&#x9875;&#x9762;index.jsp</h3><figure class="highlight erb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">%</span></span></span><span class="ruby">@ page language=<span class="string">&quot;java&quot;</span> contentType=<span class="string">&quot;text/html; charset=utf-8&quot;</span> pageEncoding=<span class="string">&quot;utf-8&quot;</span></span><span class="xml"><span class="tag">%&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>index&#x9875;&#x9762;&#x6807;&#x9898;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="actionscript"></span><br><span class="line">	alert(<span class="string">&apos;script&apos;</span>);</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">header</span>&gt;</span>my header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">footer</span>&gt;</span>my footer<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure> <h3 id="&#x81EA;&#x5B9A;&#x4E49;tag"><a href="#&#x81EA;&#x5B9A;&#x4E49;tag" class="headerlink" title="&#x81EA;&#x5B9A;&#x4E49;tag"></a>&#x81EA;&#x5B9A;&#x4E49;tag</h3><p><strong>FooterTagRuleBundle</strong><br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">public</span> <span class="selector-tag">class</span> <span class="selector-tag">FooterTagRuleBundle</span> <span class="selector-tag">implements</span> <span class="selector-tag">TagRuleBundle</span> {</span><br><span class="line">	<span class="variable">@Override</span></span><br><span class="line">	public void install(State defaultState, ContentProperty contentProperty, SiteMeshContext siteMeshContext) {</span><br><span class="line">		defaultState<span class="selector-class">.addRule</span>(<span class="string">&quot;footer&quot;</span>,</span><br><span class="line">				new ExportTagToContentRule(siteMeshContext, contentProperty.getChild(<span class="string">&quot;footer&quot;</span>), false));</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="variable">@Override</span></span><br><span class="line">	public void cleanUp(State defaultState, ContentProperty contentProperty, SiteMeshContext siteMeshContext) {</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p> <p><strong>HeaderTagRuleBundle</strong><br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">public</span> <span class="selector-tag">class</span> <span class="selector-tag">HeaderTagRuleBundle</span> <span class="selector-tag">implements</span> <span class="selector-tag">TagRuleBundle</span> {</span><br><span class="line">	<span class="variable">@Override</span></span><br><span class="line">	public void install(State defaultState, ContentProperty contentProperty, SiteMeshContext siteMeshContext) {</span><br><span class="line">		defaultState<span class="selector-class">.addRule</span>(<span class="string">&quot;header&quot;</span>,</span><br><span class="line">				new ExportTagToContentRule(siteMeshContext, contentProperty.getChild(<span class="string">&quot;header&quot;</span>), false));</span><br><span class="line"></span><br><span class="line">	}</span><br><span class="line"></span><br><span class="line">	<span class="variable">@Override</span></span><br><span class="line">	public void cleanUp(State defaultState, ContentProperty contentProperty, SiteMeshContext siteMeshContext) {</span><br><span class="line">	}</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p> <h3 id="&#x8FD0;&#x884C;&#x9879;&#x76EE;-&#x8BBF;&#x95EE;-indexjsp"><a href="#&#x8FD0;&#x884C;&#x9879;&#x76EE;-&#x8BBF;&#x95EE;-index-jsp" class="headerlink" title="&#x8FD0;&#x884C;&#x9879;&#x76EE; &#x8BBF;&#x95EE; index.jsp"></a>&#x8FD0;&#x884C;&#x9879;&#x76EE; &#x8BBF;&#x95EE; index.jsp</h3><p><img src="/resource/images/20160530/sitemesh01.png" alt="sitemesh"><br><strong>&#x751F;&#x6210;html&#x6E90;&#x7801;</strong><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>index&#x9875;&#x9762;&#x6807;&#x9898; -sitemesh<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="actionscript"></span><br><span class="line">	alert(<span class="string">&apos;script&apos;</span>);</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">header</span>&gt;</span>header - my header<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"></span><br><span class="line">	<span class="tag">&lt;<span class="name">footer</span>&gt;</span>footer - my footer<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p> <h2 id="link"><a href="#Link" class="headerlink" title="Link"></a>Link</h2><ol> <li><a href="http://wiki.sitemesh.org/wiki/display/sitemesh3/SiteMesh+3+Overview" target="_blank" rel="external">Sitemesh&#x5B98;&#x7F51;&#x5730;&#x5740;</a></li> <li><a href="http://www.cnblogs.com/luotaoyeah/p/3776879.html" target="_blank" rel="external">Sitemesh 3 &#x7684;&#x4F7F;&#x7528;&#x53CA;&#x914D;&#x7F6E;</a></li> <li><a href="http://blog.csdn.net/tbwood/article/details/40983143" target="_blank" rel="external">Sitemesh VS Apache Tiles</a></li> </ol> </div> <script type="text/javascript">function rewardButtonClick(){var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"}</script><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"> <div></div> <button id="rewardButton" disable="enable" onclick="rewardButtonClick()" style="cursor:pointer;border:0;outline:0;border-radius:100%;padding:0;margin:0;letter-spacing:normal;text-transform:none;text-indent:0;text-shadow:none"> <span onmouseover="this.style.color=&quot;rgb(236,96,0)&quot;,this.style.background=&quot;rgb(204,204,204)&quot" onmouseout="this.style.color=&quot;#fff&quot;,this.style.background=&quot;rgb(236,96,0)&quot" style="display:inline-block;width:70px;height:70px;border-radius:100%;line-height:81px;color:#fff;font:400 35px/75px microsofty;background:#ec6000">赏</span> </button> <div id="QR" style="display:none"> <div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/resource/images/reward/wechat.png" alt="翟春龙 WeChat Pay" style="width:200px;max-width:100%;display:inline-block"> <p>微信打赏</p> </div> <div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/resource/images/reward/alipay.png" alt="翟春龙 Alipay" style="width:200px;max-width:100%;display:inline-block"> <p>支付宝打赏</p> </div> </div> <div></div></div> <footer> <div class="alignleft"> <div class="categories"> <a href="/categories/框架使用/">框架使用</a> </div> <div class="tags"> <a href="/tags/sitemesh/">sitemesh</a> </div> </div> <div class="alignright"> <div style="z-index:1000000"> <div class="ds-share flat" data-thread-key="2016/05/30/sitemesh3使用及配置/" data-title="sitemesh3使用及配置" data-content="" data-url="http://www.dzhai.net/2016/05/30/sitemesh3使用及配置/"> <div class="ds-share-inline"> <ul class="ds-share-icons-16"> <li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li> <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li> <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li> <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li> <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li> </ul> <div class="ds-share-icons-more"> </div> </div> </div> </div> </div> <div class="clearfix"></div> </footer> </div> </article> <section id="comment"> <!-- Duoshuo Comment BEGIN --> <div class="ds-thread" data-thread-key="2016/05/30/sitemesh3使用及配置/"></div> <script type="text/javascript">var duoshuoQuery={short_name:"dzhai"};!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="http://static.duoshuo.com/embed.js",e.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script><!-- Duoshuo Comment END --></section></div></div><div class="clearfix"></div> </div> <footer id="footer"><div class="inner"><div class="alignleft"> <p> &copy; 2016 dzhai </p> <p> <a href="https://github.com/imbyron/hexo-theme-daisy">Theme</a> By <a href="http://googleyixia.com">Byron</a> based on <a href="https://github.com/willerce/hexo-theme-noderce">Noderce</a>. </p> </div> <div class="clearfix"></div></div></footer> <script type="text/javascript"></script></body>